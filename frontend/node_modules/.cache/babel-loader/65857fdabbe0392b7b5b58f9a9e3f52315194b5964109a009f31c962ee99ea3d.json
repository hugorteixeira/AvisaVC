{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useNavigate}from'react-router-dom';import{useApp}from'../contexts/AppContext';import{AudioRecorder,visualizeAudioLevel}from'../utils/audioRecorder';import{createSession,startCalibration,finishCalibration}from'../utils/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function VoiceRecording(){const navigate=useNavigate();const{setBaselineVoice}=useApp();const[status,setStatus]=useState('init');// init, ready, recording, processing, complete, error\nconst[sessionId,setSessionId]=useState(null);const[recordingTime,setRecordingTime]=useState(0);const[audioLevel,setAudioLevel]=useState(0);const[calibrationResult,setCalibrationResult]=useState(null);const[error,setError]=useState(null);const audioRecorderRef=useRef(null);const timerRef=useRef(null);const audioLevelIntervalRef=useRef(null);// Initialize session on mount\nuseEffect(()=>{initializeSession();return()=>{cleanup();};},[]);const initializeSession=async()=>{try{// Create session\nconst session=await createSession();setSessionId(session.session_id);// Initialize audio recorder\naudioRecorderRef.current=new AudioRecorder();await audioRecorderRef.current.init();setStatus('ready');}catch(err){console.error('Failed to initialize:',err);setError(err.message);setStatus('error');}};const handleStartRecording=async()=>{if(!sessionId||!audioRecorderRef.current){setError('Sistema n√£o inicializado');return;}try{// Start calibration on backend\nawait startCalibration(sessionId);// Start recording\naudioRecorderRef.current.startRecording();setStatus('recording');setRecordingTime(0);// Start timer\ntimerRef.current=setInterval(()=>{setRecordingTime(prev=>{const newTime=prev+0.1;// Auto-stop at 20 seconds (maximum)\nif(newTime>=20){handleStopRecording();}return newTime;});},100);// Start audio level monitoring\naudioLevelIntervalRef.current=audioRecorderRef.current.startAudioLevelMonitoring(level=>setAudioLevel(level),100);}catch(err){console.error('Failed to start recording:',err);setError(err.message);setStatus('error');}};const handleStopRecording=async()=>{if(!audioRecorderRef.current||!sessionId)return;// Clear timer and audio level monitoring\nif(timerRef.current){clearInterval(timerRef.current);timerRef.current=null;}if(audioLevelIntervalRef.current){clearInterval(audioLevelIntervalRef.current);audioLevelIntervalRef.current=null;}// Check minimum duration\nif(recordingTime<5){setError('Grava√ß√£o muito curta! M√≠nimo 5 segundos.');setStatus('ready');setRecordingTime(0);return;}setStatus('processing');try{// Stop recording\nconst audioBlob=await audioRecorderRef.current.stopRecording();// Finish calibration on backend\nconst result=await finishCalibration(sessionId);setCalibrationResult(result);// Save to context\nsetBaselineVoice({baseline:result.baseline,duration:result.duration,text:result.text,sessionId:sessionId});setStatus('complete');}catch(err){console.error('Failed to process calibration:',err);setError(err.message);setStatus('error');}};const handleContinue=()=>{cleanup();navigate('/face-recording');};const handleRetry=()=>{setStatus('ready');setRecordingTime(0);setAudioLevel(0);setCalibrationResult(null);setError(null);};const cleanup=()=>{if(timerRef.current){clearInterval(timerRef.current);}if(audioLevelIntervalRef.current){clearInterval(audioLevelIntervalRef.current);}if(audioRecorderRef.current){audioRecorderRef.current.cleanup();}};// Render different states\nif(status==='init'){return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Inicializando sistema de \\xE1udio...\"})]});}if(status==='error'){return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"icon danger\",children:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Erro\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:error}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:initializeSession,children:\"TENTAR NOVAMENTE\"})]});}if(status==='complete'&&calibrationResult){return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"icon success\",children:\"\\u2713\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Calibra\\xE7\\xE3o Completa!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card mt-3\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Resultados da Calibra\\xE7\\xE3o\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Dura\\xE7\\xE3o:\"}),\" \",calibrationResult.duration.toFixed(1),\"s\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Velocidade de Fala:\"}),\" \",calibrationResult.baseline.toFixed(2),\" caracteres/segundo\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mt-2\",children:/*#__PURE__*/_jsxs(\"em\",{children:[\"\\\"\",calibrationResult.text,\"\\\"\"]})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card mt-2 bg-info\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u2139\\uFE0F Importante:\"}),\" Seu padr\\xE3o de fala foi salvo. O sistema ir\\xE1 alert\\xE1-lo se detectar uma queda significativa na sua velocidade de fala.\"]})}),/*#__PURE__*/_jsx(\"button\",{className:\"button green mt-3\",onClick:handleContinue,children:\"CONTINUAR PARA DETEC\\xC7\\xC3O FACIAL\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button white mt-2\",onClick:handleRetry,children:\"REFAZER CALIBRA\\xC7\\xC3O\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"progress-indicator\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"step active\",children:\"1\"}),/*#__PURE__*/_jsx(\"div\",{className:\"step-line\"}),/*#__PURE__*/_jsx(\"div\",{className:\"step\",children:\"2\"})]}),/*#__PURE__*/_jsx(\"h1\",{children:\"Calibra\\xE7\\xE3o de Voz\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Etapa 1 de 2 - Cria\\xE7\\xE3o do Perfil\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card mt-3\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Instru\\xE7\\xF5es\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"text-left\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"Fale naturalmente por \",/*#__PURE__*/_jsx(\"strong\",{children:\"5 a 20 segundos\"})]}),/*#__PURE__*/_jsx(\"li\",{children:\"Mantenha uma velocidade de fala normal\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Evite pausas longas\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Pode falar sobre qualquer assunto\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mt-2\",children:/*#__PURE__*/_jsx(\"em\",{children:\"Exemplo: Descreva seu dia, fale sobre o clima, conte uma hist\\xF3ria...\"})})]}),status==='ready'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"button purple mt-3\",onClick:handleStartRecording,children:\"\\uD83C\\uDFA4 INICIAR GRAVA\\xC7\\xC3O\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button white mt-2\",onClick:()=>navigate(-1),children:\"VOLTAR\"})]}),status==='recording'&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card bg-recording\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"recording-indicator\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"recording-dot\"}),\"GRAVANDO\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"timer\",children:[recordingTime.toFixed(1),\"s\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"audio-visualizer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"audio-bars\",children:visualizeAudioLevel(audioLevel)}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-muted mt-2\",children:[\"N\\xEDvel: \",audioLevel.toFixed(0),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-fill\",style:{width:\"\".concat(Math.min(100,recordingTime/20*100),\"%\")}})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mt-1\",children:recordingTime<5?\"M\\xEDnimo: 5s (faltam \".concat((5-recordingTime).toFixed(1),\"s)\"):\"M\\xE1ximo: 20s (faltam \".concat((20-recordingTime).toFixed(1),\"s)\")})]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"button mt-3\",onClick:handleStopRecording,disabled:recordingTime<5,children:[\"\\u23F9\\uFE0F PARAR GRAVA\\xC7\\xC3O \",recordingTime>=5?'(Pronto!)':'(Aguarde...)']})]}),status==='processing'&&/*#__PURE__*/_jsxs(\"div\",{className:\"card mt-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Processando \\xE1udio e criando seu perfil vocal...\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Isso pode levar alguns segundos.\"})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","useApp","AudioRecorder","visualizeAudioLevel","createSession","startCalibration","finishCalibration","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","VoiceRecording","navigate","setBaselineVoice","status","setStatus","sessionId","setSessionId","recordingTime","setRecordingTime","audioLevel","setAudioLevel","calibrationResult","setCalibrationResult","error","setError","audioRecorderRef","timerRef","audioLevelIntervalRef","initializeSession","cleanup","session","session_id","current","init","err","console","message","handleStartRecording","startRecording","setInterval","prev","newTime","handleStopRecording","startAudioLevelMonitoring","level","clearInterval","audioBlob","stopRecording","result","baseline","duration","text","handleContinue","handleRetry","className","children","onClick","toFixed","style","width","concat","Math","min","disabled"],"sources":["/home/hugorteixeira/AvisoVC/frontend/src/pages/VoiceRecording.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useApp } from '../contexts/AppContext';\nimport { AudioRecorder, visualizeAudioLevel } from '../utils/audioRecorder';\nimport { createSession, startCalibration, finishCalibration } from '../utils/api';\n\nexport default function VoiceRecording() {\n  const navigate = useNavigate();\n  const { setBaselineVoice } = useApp();\n\n  const [status, setStatus] = useState('init'); // init, ready, recording, processing, complete, error\n  const [sessionId, setSessionId] = useState(null);\n  const [recordingTime, setRecordingTime] = useState(0);\n  const [audioLevel, setAudioLevel] = useState(0);\n  const [calibrationResult, setCalibrationResult] = useState(null);\n  const [error, setError] = useState(null);\n\n  const audioRecorderRef = useRef(null);\n  const timerRef = useRef(null);\n  const audioLevelIntervalRef = useRef(null);\n\n  // Initialize session on mount\n  useEffect(() => {\n    initializeSession();\n    return () => {\n      cleanup();\n    };\n  }, []);\n\n  const initializeSession = async () => {\n    try {\n      // Create session\n      const session = await createSession();\n      setSessionId(session.session_id);\n\n      // Initialize audio recorder\n      audioRecorderRef.current = new AudioRecorder();\n      await audioRecorderRef.current.init();\n\n      setStatus('ready');\n    } catch (err) {\n      console.error('Failed to initialize:', err);\n      setError(err.message);\n      setStatus('error');\n    }\n  };\n\n  const handleStartRecording = async () => {\n    if (!sessionId || !audioRecorderRef.current) {\n      setError('Sistema n√£o inicializado');\n      return;\n    }\n\n    try {\n      // Start calibration on backend\n      await startCalibration(sessionId);\n\n      // Start recording\n      audioRecorderRef.current.startRecording();\n      setStatus('recording');\n      setRecordingTime(0);\n\n      // Start timer\n      timerRef.current = setInterval(() => {\n        setRecordingTime((prev) => {\n          const newTime = prev + 0.1;\n          // Auto-stop at 20 seconds (maximum)\n          if (newTime >= 20) {\n            handleStopRecording();\n          }\n          return newTime;\n        });\n      }, 100);\n\n      // Start audio level monitoring\n      audioLevelIntervalRef.current = audioRecorderRef.current.startAudioLevelMonitoring(\n        (level) => setAudioLevel(level),\n        100\n      );\n    } catch (err) {\n      console.error('Failed to start recording:', err);\n      setError(err.message);\n      setStatus('error');\n    }\n  };\n\n  const handleStopRecording = async () => {\n    if (!audioRecorderRef.current || !sessionId) return;\n\n    // Clear timer and audio level monitoring\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n    if (audioLevelIntervalRef.current) {\n      clearInterval(audioLevelIntervalRef.current);\n      audioLevelIntervalRef.current = null;\n    }\n\n    // Check minimum duration\n    if (recordingTime < 5) {\n      setError('Grava√ß√£o muito curta! M√≠nimo 5 segundos.');\n      setStatus('ready');\n      setRecordingTime(0);\n      return;\n    }\n\n    setStatus('processing');\n\n    try {\n      // Stop recording\n      const audioBlob = await audioRecorderRef.current.stopRecording();\n\n      // Finish calibration on backend\n      const result = await finishCalibration(sessionId);\n\n      setCalibrationResult(result);\n\n      // Save to context\n      setBaselineVoice({\n        baseline: result.baseline,\n        duration: result.duration,\n        text: result.text,\n        sessionId: sessionId,\n      });\n\n      setStatus('complete');\n    } catch (err) {\n      console.error('Failed to process calibration:', err);\n      setError(err.message);\n      setStatus('error');\n    }\n  };\n\n  const handleContinue = () => {\n    cleanup();\n    navigate('/face-recording');\n  };\n\n  const handleRetry = () => {\n    setStatus('ready');\n    setRecordingTime(0);\n    setAudioLevel(0);\n    setCalibrationResult(null);\n    setError(null);\n  };\n\n  const cleanup = () => {\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n    }\n    if (audioLevelIntervalRef.current) {\n      clearInterval(audioLevelIntervalRef.current);\n    }\n    if (audioRecorderRef.current) {\n      audioRecorderRef.current.cleanup();\n    }\n  };\n\n  // Render different states\n  if (status === 'init') {\n    return (\n      <div className=\"container\">\n        <div className=\"spinner\"></div>\n        <p>Inicializando sistema de √°udio...</p>\n      </div>\n    );\n  }\n\n  if (status === 'error') {\n    return (\n      <div className=\"container\">\n        <div className=\"icon danger\">‚ö†Ô∏è</div>\n        <h1>Erro</h1>\n        <p className=\"text-danger\">{error}</p>\n        <button className=\"button\" onClick={initializeSession}>\n          TENTAR NOVAMENTE\n        </button>\n      </div>\n    );\n  }\n\n  if (status === 'complete' && calibrationResult) {\n    return (\n      <div className=\"container\">\n        <div className=\"icon success\">‚úì</div>\n        <h1>Calibra√ß√£o Completa!</h1>\n\n        <div className=\"card mt-3\">\n          <h3>Resultados da Calibra√ß√£o</h3>\n          <div className=\"mt-2\">\n            <p><strong>Dura√ß√£o:</strong> {calibrationResult.duration.toFixed(1)}s</p>\n            <p><strong>Velocidade de Fala:</strong> {calibrationResult.baseline.toFixed(2)} caracteres/segundo</p>\n            <p className=\"text-muted mt-2\"><em>\"{calibrationResult.text}\"</em></p>\n          </div>\n        </div>\n\n        <div className=\"card mt-2 bg-info\">\n          <p className=\"mb-0\">\n            <strong>‚ÑπÔ∏è Importante:</strong> Seu padr√£o de fala foi salvo. O sistema ir√° alert√°-lo\n            se detectar uma queda significativa na sua velocidade de fala.\n          </p>\n        </div>\n\n        <button className=\"button green mt-3\" onClick={handleContinue}>\n          CONTINUAR PARA DETEC√á√ÉO FACIAL\n        </button>\n        <button className=\"button white mt-2\" onClick={handleRetry}>\n          REFAZER CALIBRA√á√ÉO\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container\">\n      <div className=\"progress-indicator\">\n        <div className=\"step active\">1</div>\n        <div className=\"step-line\"></div>\n        <div className=\"step\">2</div>\n      </div>\n\n      <h1>Calibra√ß√£o de Voz</h1>\n      <p className=\"text-muted\">Etapa 1 de 2 - Cria√ß√£o do Perfil</p>\n\n      <div className=\"card mt-3\">\n        <h3>Instru√ß√µes</h3>\n        <ul className=\"text-left\">\n          <li>Fale naturalmente por <strong>5 a 20 segundos</strong></li>\n          <li>Mantenha uma velocidade de fala normal</li>\n          <li>Evite pausas longas</li>\n          <li>Pode falar sobre qualquer assunto</li>\n        </ul>\n        <p className=\"text-muted mt-2\">\n          <em>Exemplo: Descreva seu dia, fale sobre o clima, conte uma hist√≥ria...</em>\n        </p>\n      </div>\n\n      {status === 'ready' && (\n        <>\n          <button className=\"button purple mt-3\" onClick={handleStartRecording}>\n            üé§ INICIAR GRAVA√á√ÉO\n          </button>\n          <button className=\"button white mt-2\" onClick={() => navigate(-1)}>\n            VOLTAR\n          </button>\n        </>\n      )}\n\n      {status === 'recording' && (\n        <div className=\"mt-3\">\n          <div className=\"card bg-recording\">\n            <div className=\"recording-indicator\">\n              <span className=\"recording-dot\"></span>\n              GRAVANDO\n            </div>\n\n            <div className=\"timer\">\n              {recordingTime.toFixed(1)}s\n            </div>\n\n            <div className=\"audio-visualizer\">\n              <div className=\"audio-bars\">\n                {visualizeAudioLevel(audioLevel)}\n              </div>\n              <p className=\"text-muted mt-2\">N√≠vel: {audioLevel.toFixed(0)}%</p>\n            </div>\n\n            <div className=\"mt-3\">\n              <div className=\"progress-bar\">\n                <div\n                  className=\"progress-fill\"\n                  style={{ width: `${Math.min(100, (recordingTime / 20) * 100)}%` }}\n                ></div>\n              </div>\n              <p className=\"text-muted mt-1\">\n                {recordingTime < 5\n                  ? `M√≠nimo: 5s (faltam ${(5 - recordingTime).toFixed(1)}s)`\n                  : `M√°ximo: 20s (faltam ${(20 - recordingTime).toFixed(1)}s)`\n                }\n              </p>\n            </div>\n          </div>\n\n          <button\n            className=\"button mt-3\"\n            onClick={handleStopRecording}\n            disabled={recordingTime < 5}\n          >\n            ‚èπÔ∏è PARAR GRAVA√á√ÉO {recordingTime >= 5 ? '(Pronto!)' : '(Aguarde...)'}\n          </button>\n        </div>\n      )}\n\n      {status === 'processing' && (\n        <div className=\"card mt-3\">\n          <div className=\"spinner\"></div>\n          <p>Processando √°udio e criando seu perfil vocal...</p>\n          <p className=\"text-muted\">Isso pode levar alguns segundos.</p>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}