{"ast":null,"code":"// API utility for backend communication\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n\n/**\n * Create a new audio session\n * @returns {Promise<{session_id: string}>}\n */\nexport async function createSession() {\n  const response = await fetch(`${API_BASE_URL}/api/session`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n  if (!response.ok) {\n    throw new Error(`Failed to create session: ${response.statusText}`);\n  }\n  return response.json();\n}\n\n/**\n * Start calibration for a session\n * @param {string} sessionId\n * @returns {Promise<{status: string}>}\n */\nexport async function startCalibration(sessionId) {\n  const response = await fetch(`${API_BASE_URL}/api/calibration/${sessionId}/start`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n  if (!response.ok) {\n    throw new Error(`Failed to start calibration: ${response.statusText}`);\n  }\n  return response.json();\n}\n\n/**\n * Finish calibration for a session\n * @param {string} sessionId\n * @returns {Promise<{baseline: number, duration: number, text: string}>}\n */\nexport async function finishCalibration(sessionId) {\n  const response = await fetch(`${API_BASE_URL}/api/calibration/${sessionId}/finish`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n  if (!response.ok) {\n    throw new Error(`Failed to finish calibration: ${response.statusText}`);\n  }\n  return response.json();\n}\n\n/**\n * Get calibration status for a session\n * @param {string} sessionId\n * @returns {Promise<{calibration_baseline: number|null, calibration_duration: number|null, warning_active: boolean}>}\n */\nexport async function getCalibrationStatus(sessionId) {\n  const response = await fetch(`${API_BASE_URL}/api/calibration/${sessionId}/status`, {\n    method: 'GET'\n  });\n  if (!response.ok) {\n    throw new Error(`Failed to get calibration status: ${response.statusText}`);\n  }\n  return response.json();\n}\n\n/**\n * Dismiss warning for a session\n * @param {string} sessionId\n * @returns {Promise<{status: string}>}\n */\nexport async function dismissWarning(sessionId) {\n  const response = await fetch(`${API_BASE_URL}/api/calibration/${sessionId}/dismiss-warning`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n  if (!response.ok) {\n    throw new Error(`Failed to dismiss warning: ${response.statusText}`);\n  }\n  return response.json();\n}\n\n/**\n * Send audio chunk to backend for processing\n * @param {string} sessionId\n * @param {Blob} audioBlob\n * @returns {Promise<{warning: boolean, transcript: object|null}>}\n */\nexport async function sendAudioChunk(sessionId, audioBlob) {\n  const formData = new FormData();\n  formData.append('audio', audioBlob, 'audio.wav');\n  const response = await fetch(`${API_BASE_URL}/api/audio-chunk/${sessionId}`, {\n    method: 'POST',\n    body: formData\n  });\n  if (!response.ok) {\n    throw new Error(`Failed to send audio chunk: ${response.statusText}`);\n  }\n  return response.json();\n}\n\n/**\n * Start listening (for monitoring mode)\n * @param {string} sessionId\n * @returns {Promise<{status: string}>}\n */\nexport async function startListening(sessionId) {\n  const response = await fetch(`${API_BASE_URL}/api/start-listening/${sessionId}`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n  if (!response.ok) {\n    throw new Error(`Failed to start listening: ${response.statusText}`);\n  }\n  return response.json();\n}\n\n/**\n * Stop listening (for monitoring mode)\n * @param {string} sessionId\n * @returns {Promise<{status: string}>}\n */\nexport async function stopListening(sessionId) {\n  const response = await fetch(`${API_BASE_URL}/api/stop-listening/${sessionId}`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n  if (!response.ok) {\n    throw new Error(`Failed to stop listening: ${response.statusText}`);\n  }\n  return response.json();\n}\n\n/**\n * Get session status\n * @param {string} sessionId\n * @returns {Promise<{state: string, transcripts: array}>}\n */\nexport async function getSessionStatus(sessionId) {\n  const response = await fetch(`${API_BASE_URL}/api/session/${sessionId}/status`, {\n    method: 'GET'\n  });\n  if (!response.ok) {\n    throw new Error(`Failed to get session status: ${response.statusText}`);\n  }\n  return response.json();\n}","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","createSession","response","fetch","method","headers","ok","Error","statusText","json","startCalibration","sessionId","finishCalibration","getCalibrationStatus","dismissWarning","sendAudioChunk","audioBlob","formData","FormData","append","body","startListening","stopListening","getSessionStatus"],"sources":["/home/hugorteixeira/AvisoVC/frontend/src/utils/api.js"],"sourcesContent":["// API utility for backend communication\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n\n/**\n * Create a new audio session\n * @returns {Promise<{session_id: string}>}\n */\nexport async function createSession() {\n  const response = await fetch(`${API_BASE_URL}/api/session`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to create session: ${response.statusText}`);\n  }\n\n  return response.json();\n}\n\n/**\n * Start calibration for a session\n * @param {string} sessionId\n * @returns {Promise<{status: string}>}\n */\nexport async function startCalibration(sessionId) {\n  const response = await fetch(`${API_BASE_URL}/api/calibration/${sessionId}/start`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to start calibration: ${response.statusText}`);\n  }\n\n  return response.json();\n}\n\n/**\n * Finish calibration for a session\n * @param {string} sessionId\n * @returns {Promise<{baseline: number, duration: number, text: string}>}\n */\nexport async function finishCalibration(sessionId) {\n  const response = await fetch(`${API_BASE_URL}/api/calibration/${sessionId}/finish`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to finish calibration: ${response.statusText}`);\n  }\n\n  return response.json();\n}\n\n/**\n * Get calibration status for a session\n * @param {string} sessionId\n * @returns {Promise<{calibration_baseline: number|null, calibration_duration: number|null, warning_active: boolean}>}\n */\nexport async function getCalibrationStatus(sessionId) {\n  const response = await fetch(`${API_BASE_URL}/api/calibration/${sessionId}/status`, {\n    method: 'GET',\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to get calibration status: ${response.statusText}`);\n  }\n\n  return response.json();\n}\n\n/**\n * Dismiss warning for a session\n * @param {string} sessionId\n * @returns {Promise<{status: string}>}\n */\nexport async function dismissWarning(sessionId) {\n  const response = await fetch(`${API_BASE_URL}/api/calibration/${sessionId}/dismiss-warning`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to dismiss warning: ${response.statusText}`);\n  }\n\n  return response.json();\n}\n\n/**\n * Send audio chunk to backend for processing\n * @param {string} sessionId\n * @param {Blob} audioBlob\n * @returns {Promise<{warning: boolean, transcript: object|null}>}\n */\nexport async function sendAudioChunk(sessionId, audioBlob) {\n  const formData = new FormData();\n  formData.append('audio', audioBlob, 'audio.wav');\n\n  const response = await fetch(`${API_BASE_URL}/api/audio-chunk/${sessionId}`, {\n    method: 'POST',\n    body: formData,\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to send audio chunk: ${response.statusText}`);\n  }\n\n  return response.json();\n}\n\n/**\n * Start listening (for monitoring mode)\n * @param {string} sessionId\n * @returns {Promise<{status: string}>}\n */\nexport async function startListening(sessionId) {\n  const response = await fetch(`${API_BASE_URL}/api/start-listening/${sessionId}`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to start listening: ${response.statusText}`);\n  }\n\n  return response.json();\n}\n\n/**\n * Stop listening (for monitoring mode)\n * @param {string} sessionId\n * @returns {Promise<{status: string}>}\n */\nexport async function stopListening(sessionId) {\n  const response = await fetch(`${API_BASE_URL}/api/stop-listening/${sessionId}`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to stop listening: ${response.statusText}`);\n  }\n\n  return response.json();\n}\n\n/**\n * Get session status\n * @param {string} sessionId\n * @returns {Promise<{state: string, transcripts: array}>}\n */\nexport async function getSessionStatus(sessionId) {\n  const response = await fetch(`${API_BASE_URL}/api/session/${sessionId}/status`, {\n    method: 'GET',\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to get session status: ${response.statusText}`);\n  }\n\n  return response.json();\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}