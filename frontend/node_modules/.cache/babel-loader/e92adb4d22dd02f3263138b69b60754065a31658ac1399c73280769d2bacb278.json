{"ast":null,"code":"// API utility for backend communication\nconst API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:8000';/**\n * Create a new audio session\n * @returns {Promise<{session_id: string}>}\n */export async function createSession(){const response=await fetch(\"\".concat(API_BASE_URL,\"/api/session\"),{method:'POST',headers:{'Content-Type':'application/json'}});if(!response.ok){throw new Error(\"Failed to create session: \".concat(response.statusText));}return response.json();}/**\n * Start calibration for a session\n * @param {string} sessionId\n * @returns {Promise<{status: string}>}\n */export async function startCalibration(sessionId){const response=await fetch(\"\".concat(API_BASE_URL,\"/api/calibration/\").concat(sessionId,\"/start\"),{method:'POST',headers:{'Content-Type':'application/json'}});if(!response.ok){throw new Error(\"Failed to start calibration: \".concat(response.statusText));}return response.json();}/**\n * Finish calibration for a session\n * @param {string} sessionId\n * @returns {Promise<{baseline: number, duration: number, text: string}>}\n */export async function finishCalibration(sessionId){const response=await fetch(\"\".concat(API_BASE_URL,\"/api/calibration/\").concat(sessionId,\"/finish\"),{method:'POST',headers:{'Content-Type':'application/json'}});if(!response.ok){throw new Error(\"Failed to finish calibration: \".concat(response.statusText));}return response.json();}/**\n * Get calibration status for a session\n * @param {string} sessionId\n * @returns {Promise<{calibration_baseline: number|null, calibration_duration: number|null, warning_active: boolean}>}\n */export async function getCalibrationStatus(sessionId){const response=await fetch(\"\".concat(API_BASE_URL,\"/api/calibration/\").concat(sessionId,\"/status\"),{method:'GET'});if(!response.ok){throw new Error(\"Failed to get calibration status: \".concat(response.statusText));}return response.json();}/**\n * Dismiss warning for a session\n * @param {string} sessionId\n * @returns {Promise<{status: string}>}\n */export async function dismissWarning(sessionId){const response=await fetch(\"\".concat(API_BASE_URL,\"/api/calibration/\").concat(sessionId,\"/dismiss-warning\"),{method:'POST',headers:{'Content-Type':'application/json'}});if(!response.ok){throw new Error(\"Failed to dismiss warning: \".concat(response.statusText));}return response.json();}/**\n * Send audio chunk to backend for processing\n * @param {string} sessionId\n * @param {Blob} audioBlob\n * @returns {Promise<{warning: boolean, transcript: object|null}>}\n */export async function sendAudioChunk(sessionId,audioBlob){const formData=new FormData();formData.append('audio',audioBlob,'audio.wav');const response=await fetch(\"\".concat(API_BASE_URL,\"/api/audio-chunk/\").concat(sessionId),{method:'POST',body:formData});if(!response.ok){throw new Error(\"Failed to send audio chunk: \".concat(response.statusText));}return response.json();}/**\n * Start listening (for monitoring mode)\n * @param {string} sessionId\n * @returns {Promise<{status: string}>}\n */export async function startListening(sessionId){const response=await fetch(\"\".concat(API_BASE_URL,\"/api/start-listening/\").concat(sessionId),{method:'POST',headers:{'Content-Type':'application/json'}});if(!response.ok){throw new Error(\"Failed to start listening: \".concat(response.statusText));}return response.json();}/**\n * Stop listening (for monitoring mode)\n * @param {string} sessionId\n * @returns {Promise<{status: string}>}\n */export async function stopListening(sessionId){const response=await fetch(\"\".concat(API_BASE_URL,\"/api/stop-listening/\").concat(sessionId),{method:'POST',headers:{'Content-Type':'application/json'}});if(!response.ok){throw new Error(\"Failed to stop listening: \".concat(response.statusText));}return response.json();}/**\n * Get session status\n * @param {string} sessionId\n * @returns {Promise<{state: string, transcripts: array}>}\n */export async function getSessionStatus(sessionId){const response=await fetch(\"\".concat(API_BASE_URL,\"/api/session/\").concat(sessionId,\"/status\"),{method:'GET'});if(!response.ok){throw new Error(\"Failed to get session status: \".concat(response.statusText));}return response.json();}","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","createSession","response","fetch","concat","method","headers","ok","Error","statusText","json","startCalibration","sessionId","finishCalibration","getCalibrationStatus","dismissWarning","sendAudioChunk","audioBlob","formData","FormData","append","body","startListening","stopListening","getSessionStatus"],"sources":["/home/hugorteixeira/AvisoVC/frontend/src/utils/api.js"],"sourcesContent":["// API utility for backend communication\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n\n/**\n * Create a new audio session\n * @returns {Promise<{session_id: string}>}\n */\nexport async function createSession() {\n  const response = await fetch(`${API_BASE_URL}/api/session`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to create session: ${response.statusText}`);\n  }\n\n  return response.json();\n}\n\n/**\n * Start calibration for a session\n * @param {string} sessionId\n * @returns {Promise<{status: string}>}\n */\nexport async function startCalibration(sessionId) {\n  const response = await fetch(`${API_BASE_URL}/api/calibration/${sessionId}/start`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to start calibration: ${response.statusText}`);\n  }\n\n  return response.json();\n}\n\n/**\n * Finish calibration for a session\n * @param {string} sessionId\n * @returns {Promise<{baseline: number, duration: number, text: string}>}\n */\nexport async function finishCalibration(sessionId) {\n  const response = await fetch(`${API_BASE_URL}/api/calibration/${sessionId}/finish`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to finish calibration: ${response.statusText}`);\n  }\n\n  return response.json();\n}\n\n/**\n * Get calibration status for a session\n * @param {string} sessionId\n * @returns {Promise<{calibration_baseline: number|null, calibration_duration: number|null, warning_active: boolean}>}\n */\nexport async function getCalibrationStatus(sessionId) {\n  const response = await fetch(`${API_BASE_URL}/api/calibration/${sessionId}/status`, {\n    method: 'GET',\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to get calibration status: ${response.statusText}`);\n  }\n\n  return response.json();\n}\n\n/**\n * Dismiss warning for a session\n * @param {string} sessionId\n * @returns {Promise<{status: string}>}\n */\nexport async function dismissWarning(sessionId) {\n  const response = await fetch(`${API_BASE_URL}/api/calibration/${sessionId}/dismiss-warning`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to dismiss warning: ${response.statusText}`);\n  }\n\n  return response.json();\n}\n\n/**\n * Send audio chunk to backend for processing\n * @param {string} sessionId\n * @param {Blob} audioBlob\n * @returns {Promise<{warning: boolean, transcript: object|null}>}\n */\nexport async function sendAudioChunk(sessionId, audioBlob) {\n  const formData = new FormData();\n  formData.append('audio', audioBlob, 'audio.wav');\n\n  const response = await fetch(`${API_BASE_URL}/api/audio-chunk/${sessionId}`, {\n    method: 'POST',\n    body: formData,\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to send audio chunk: ${response.statusText}`);\n  }\n\n  return response.json();\n}\n\n/**\n * Start listening (for monitoring mode)\n * @param {string} sessionId\n * @returns {Promise<{status: string}>}\n */\nexport async function startListening(sessionId) {\n  const response = await fetch(`${API_BASE_URL}/api/start-listening/${sessionId}`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to start listening: ${response.statusText}`);\n  }\n\n  return response.json();\n}\n\n/**\n * Stop listening (for monitoring mode)\n * @param {string} sessionId\n * @returns {Promise<{status: string}>}\n */\nexport async function stopListening(sessionId) {\n  const response = await fetch(`${API_BASE_URL}/api/stop-listening/${sessionId}`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to stop listening: ${response.statusText}`);\n  }\n\n  return response.json();\n}\n\n/**\n * Get session status\n * @param {string} sessionId\n * @returns {Promise<{state: string, transcripts: array}>}\n */\nexport async function getSessionStatus(sessionId) {\n  const response = await fetch(`${API_BASE_URL}/api/session/${sessionId}/status`, {\n    method: 'GET',\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to get session status: ${response.statusText}`);\n  }\n\n  return response.json();\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}