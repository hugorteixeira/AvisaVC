{"ast":null,"code":"var _jsxFileName = \"/home/hugorteixeira/AvisoVC/frontend/src/pages/TestFacial.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useApp } from '../contexts/AppContext';\nimport { FaceDetector, drawLandmarks } from '../utils/faceDetection';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function TestFacial() {\n  _s();\n  const navigate = useNavigate();\n  const {\n    baselineFace\n  } = useApp();\n  const [status, setStatus] = useState('init'); // init, ready, testing, analyzing, result, error\n  const [testDuration, setTestDuration] = useState(0);\n  const [detectionResult, setDetectionResult] = useState(null);\n  const [currentStatus, setCurrentStatus] = useState('');\n  const [error, setError] = useState(null);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const faceDetectorRef = useRef(null);\n  const streamRef = useRef(null);\n  const animationFrameRef = useRef(null);\n  const timerRef = useRef(null);\n  useEffect(() => {\n    initializeTest();\n    return () => {\n      cleanup();\n    };\n  }, []);\n  const initializeTest = async () => {\n    try {\n      // Check if baseline exists\n      if (!baselineFace) {\n        setError('Voc√™ precisa criar um perfil facial primeiro');\n        setStatus('error');\n        return;\n      }\n\n      // Initialize camera\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          facingMode: 'user',\n          width: {\n            ideal: 720\n          },\n          height: {\n            ideal: 540\n          }\n        },\n        audio: false\n      });\n      streamRef.current = stream;\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        await new Promise(resolve => {\n          videoRef.current.onloadedmetadata = resolve;\n        });\n        await videoRef.current.play();\n\n        // Wait for video to have valid dimensions\n        await new Promise(resolve => {\n          const checkDimensions = () => {\n            if (videoRef.current.videoWidth > 0 && videoRef.current.videoHeight > 0) {\n              resolve();\n            } else {\n              setTimeout(checkDimensions, 100);\n            }\n          };\n          checkDimensions();\n        });\n        if (canvasRef.current) {\n          canvasRef.current.width = videoRef.current.videoWidth;\n          canvasRef.current.height = videoRef.current.videoHeight;\n        }\n      }\n\n      // Initialize face detector\n      faceDetectorRef.current = new FaceDetector();\n      await faceDetectorRef.current.init();\n\n      // Load baseline\n      faceDetectorRef.current.loadBaseline(baselineFace);\n      setStatus('ready');\n\n      // Start preview loop to show video on canvas even before test starts\n      startPreviewLoop();\n    } catch (err) {\n      console.error('Failed to initialize test:', err);\n      setError(err.message || 'N√£o foi poss√≠vel iniciar o teste');\n      setStatus('error');\n    }\n  };\n  const startPreviewLoop = () => {\n    const previewFrame = () => {\n      const video = videoRef.current;\n      const canvas = canvasRef.current;\n\n      // Only draw if we're in ready state and have valid resources\n      if (!video || !canvas || status === 'init' || status === 'testing') {\n        return;\n      }\n      const ctx = canvas.getContext('2d');\n      if (ctx && video.videoWidth > 0 && video.videoHeight > 0) {\n        // Ensure canvas has proper dimensions\n        if (canvas.width !== video.videoWidth || canvas.height !== video.videoHeight) {\n          canvas.width = video.videoWidth;\n          canvas.height = video.videoHeight;\n        }\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n      }\n\n      // Continue preview loop\n      requestAnimationFrame(previewFrame);\n    };\n    previewFrame();\n  };\n  const handleStartTest = () => {\n    var _videoRef$current, _videoRef$current2;\n    console.log('handleStartTest called');\n    console.log('faceDetectorRef:', faceDetectorRef.current);\n    console.log('videoRef:', videoRef.current);\n    console.log('video dimensions:', (_videoRef$current = videoRef.current) === null || _videoRef$current === void 0 ? void 0 : _videoRef$current.videoWidth, (_videoRef$current2 = videoRef.current) === null || _videoRef$current2 === void 0 ? void 0 : _videoRef$current2.videoHeight);\n    if (!faceDetectorRef.current || !videoRef.current) {\n      console.error('Sistema n√£o inicializado');\n      setError('Sistema n√£o inicializado');\n      setStatus('error');\n      return;\n    }\n\n    // Validate video is ready\n    if (videoRef.current.videoWidth === 0 || videoRef.current.videoHeight === 0) {\n      console.error('V√≠deo n√£o est√° pronto');\n      setError('V√≠deo ainda n√£o est√° pronto. Aguarde um momento e tente novamente.');\n      setStatus('error');\n      return;\n    }\n    console.log('Starting test...');\n    setStatus('testing');\n    setTestDuration(0);\n    setCurrentStatus('Analisando...');\n\n    // Start timer (10 seconds test)\n    timerRef.current = setInterval(() => {\n      setTestDuration(prev => {\n        const newTime = prev + 0.1;\n        if (newTime >= 10) {\n          finishTest();\n        }\n        return newTime;\n      });\n    }, 100);\n\n    // Start detection loop\n    detectLoop();\n  };\n  const detectLoop = () => {\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    const ctx = canvas === null || canvas === void 0 ? void 0 : canvas.getContext('2d');\n    const detector = faceDetectorRef.current;\n\n    // Stop if required resources are not available\n    if (!video || !canvas || !ctx || !detector) {\n      console.warn('Detection loop stopped: missing resources');\n      return;\n    }\n    try {\n      const timestamp = performance.now();\n      const result = detector.detectFrame(video, timestamp);\n\n      // Clear and draw\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n      if (result.faceDetected) {\n        // Draw landmarks\n        if (result.landmarks) {\n          drawLandmarks(ctx, result.landmarks, canvas.width, canvas.height, result.status === 'alert');\n        }\n\n        // Update status\n        if (result.status === 'alert') {\n          setCurrentStatus('‚ö†Ô∏è ASSIMETRIA DETECTADA!');\n          setDetectionResult(result);\n        } else if (result.status === 'ok') {\n          setCurrentStatus('‚úì Normal');\n        }\n      } else if (result.status === 'no_video') {\n        // Video not ready yet, wait a bit\n        setCurrentStatus('Aguardando v√≠deo...');\n      } else {\n        setCurrentStatus('Posicione seu rosto na c√¢mera');\n      }\n\n      // Continue loop\n      animationFrameRef.current = requestAnimationFrame(detectLoop);\n    } catch (err) {\n      console.error('Detection error:', err);\n      setError(err.message);\n      setStatus('error');\n    }\n  };\n  const finishTest = () => {\n    // Stop timer and animation\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n    if (animationFrameRef.current) {\n      cancelAnimationFrame(animationFrameRef.current);\n      animationFrameRef.current = null;\n    }\n    setStatus('analyzing');\n\n    // Brief delay to show analyzing state\n    setTimeout(() => {\n      setStatus('result');\n    }, 1000);\n  };\n  const handleContinue = () => {\n    cleanup();\n    if (detectionResult && detectionResult.status === 'alert') {\n      // Skip to results attention\n      navigate('/results-attention');\n    } else {\n      // Continue to next test\n      navigate('/test-arm-right');\n    }\n  };\n  const handleRetry = () => {\n    if (faceDetectorRef.current) {\n      faceDetectorRef.current.reset();\n      if (baselineFace) {\n        faceDetectorRef.current.loadBaseline(baselineFace);\n      }\n    }\n    setStatus('ready');\n    setTestDuration(0);\n    setCurrentStatus('');\n    setDetectionResult(null);\n    setError(null);\n  };\n  const cleanup = () => {\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n    }\n    if (animationFrameRef.current) {\n      cancelAnimationFrame(animationFrameRef.current);\n    }\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => track.stop());\n    }\n    if (faceDetectorRef.current) {\n      faceDetectorRef.current.cleanup();\n    }\n  };\n\n  // Render states\n  if (status === 'init') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Inicializando teste facial...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 7\n    }, this);\n  }\n  if (status === 'error') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"icon danger\",\n        children: \"\\u26A0\\uFE0F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Erro\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-danger\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button\",\n        onClick: initializeTest,\n        children: \"TENTAR NOVAMENTE\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button white mt-2\",\n        onClick: () => navigate('/dashboard'),\n        children: \"VOLTAR AO DASHBOARD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 7\n    }, this);\n  }\n  if (status === 'result') {\n    var _detectionResult$skew, _detectionResult$base, _detectionResult$delt;\n    const hasAlert = detectionResult && detectionResult.status === 'alert';\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `icon ${hasAlert ? 'danger' : 'success'}`,\n        children: hasAlert ? '‚ö†Ô∏è' : '‚úì'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Teste Facial \", hasAlert ? 'COM ALERTA' : 'OK']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `card mt-3 ${hasAlert ? 'alert danger' : 'alert success'}`,\n        children: hasAlert ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Assimetria Facial Detectada\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-2\",\n            children: \"O teste detectou uma assimetria significativa em sua express\\xE3o facial. Isso pode ser um sinal de alerta.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 15\n          }, this), detectionResult && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\xCDndice de assimetria:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 22\n              }, this), \" \", (_detectionResult$skew = detectionResult.skewScore) === null || _detectionResult$skew === void 0 ? void 0 : _detectionResult$skew.toFixed(4)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Baseline:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 324,\n                columnNumber: 22\n              }, this), \" \", (_detectionResult$base = detectionResult.baseline) === null || _detectionResult$base === void 0 ? void 0 : _detectionResult$base.toFixed(4)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Diferen\\xE7a:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 22\n              }, this), \" \", (_detectionResult$delt = detectionResult.delta) === null || _detectionResult$delt === void 0 ? void 0 : _detectionResult$delt.toFixed(4)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Teste Facial Normal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-2\",\n            children: \"Nenhuma assimetria significativa foi detectada em sua express\\xE3o facial.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 9\n      }, this), hasAlert ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card mt-2 bg-info\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-0\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u26A0\\uFE0F Recomenda\\xE7\\xE3o:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 17\n            }, this), \" Devido ao resultado do teste, recomendamos que voc\\xEA acione a emerg\\xEAncia imediatamente.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button mt-3\",\n          onClick: () => navigate('/results-attention'),\n          children: \"ACIONAR EMERG\\xCANCIA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button white mt-2\",\n          onClick: handleRetry,\n          children: \"REFAZER TESTE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button green mt-3\",\n          onClick: handleContinue,\n          children: \"CONTINUAR PARA PR\\xD3XIMO TESTE (2/4)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button white mt-2\",\n          onClick: handleRetry,\n          children: \"REFAZER TESTE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 7\n    }, this);\n  }\n  if (status === 'analyzing') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Analisando Resultados...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-muted\",\n        children: \"Processando dados do teste facial\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Teste FAST 1/4 - Face (Rosto)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-muted\",\n      children: \"Protocolo de Detec\\xE7\\xE3o de AVC\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 7\n    }, this), status === 'ready' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card mt-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Instru\\xE7\\xF5es\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"text-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Sorria\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 17\n          }, this), \" para a c\\xE2mera\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [\"Mantenha o sorriso por \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"10 segundos\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 40\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"O sistema ir\\xE1 detectar se h\\xE1 assimetria facial\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Mantenha o rosto centralizado\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-muted mt-2\",\n        children: /*#__PURE__*/_jsxDEV(\"em\", {\n          children: \"Um sorriso assim\\xE9trico pode indicar fraqueza muscular facial\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"video-container mt-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        autoPlay: true,\n        playsInline: true,\n        muted: true,\n        style: {\n          display: status === 'ready' ? 'block' : 'none'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        style: {\n          display: status === 'testing' ? 'block' : 'none',\n          minHeight: '360px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 9\n      }, this), status === 'ready' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"video-overlay\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            bottom: '20px',\n            left: '50%',\n            transform: 'translateX(-50%)',\n            background: 'rgba(0,0,0,0.7)',\n            padding: '12px 24px',\n            borderRadius: '8px',\n            color: 'white',\n            fontWeight: '600',\n            textAlign: 'center'\n          },\n          children: \"\\uD83D\\uDCF9 C\\xE2mera ativa - Pronto para iniciar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 11\n      }, this), status === 'testing' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"video-overlay\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            top: '20px',\n            left: '50%',\n            transform: 'translateX(-50%)',\n            background: 'rgba(0,0,0,0.8)',\n            padding: '16px 32px',\n            borderRadius: '12px',\n            color: 'white',\n            fontWeight: '600',\n            fontSize: '1.2rem',\n            textAlign: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '2rem',\n              marginBottom: '8px'\n            },\n            children: [testDuration.toFixed(1), \"s\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: currentStatus\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 448,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 432,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 7\n    }, this), status === 'testing' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card mt-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"progress-bar\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-fill\",\n          style: {\n            width: `${testDuration / 10 * 100}%`,\n            background: (detectionResult === null || detectionResult === void 0 ? void 0 : detectionResult.status) === 'alert' ? 'var(--primary-red)' : 'var(--primary-green)'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center text-muted mt-2\",\n        children: [\"Mantenha o sorriso por \", (10 - testDuration).toFixed(1), \"s\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 455,\n      columnNumber: 9\n    }, this), status === 'ready' && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button purple mt-3\",\n        onClick: handleStartTest,\n        children: \"\\uD83D\\uDE0A INICIAR TESTE FACIAL\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button white mt-2\",\n        onClick: () => navigate('/dashboard'),\n        children: \"CANCELAR\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 379,\n    columnNumber: 5\n  }, this);\n}\n_s(TestFacial, \"S14sLRXYnhqRl4H29/34eBvo/CY=\", false, function () {\n  return [useNavigate, useApp];\n});\n_c = TestFacial;\nvar _c;\n$RefreshReg$(_c, \"TestFacial\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","useApp","FaceDetector","drawLandmarks","jsxDEV","_jsxDEV","Fragment","_Fragment","TestFacial","_s","navigate","baselineFace","status","setStatus","testDuration","setTestDuration","detectionResult","setDetectionResult","currentStatus","setCurrentStatus","error","setError","videoRef","canvasRef","faceDetectorRef","streamRef","animationFrameRef","timerRef","initializeTest","cleanup","stream","navigator","mediaDevices","getUserMedia","video","facingMode","width","ideal","height","audio","current","srcObject","Promise","resolve","onloadedmetadata","play","checkDimensions","videoWidth","videoHeight","setTimeout","init","loadBaseline","startPreviewLoop","err","console","message","previewFrame","canvas","ctx","getContext","clearRect","drawImage","requestAnimationFrame","handleStartTest","_videoRef$current","_videoRef$current2","log","setInterval","prev","newTime","finishTest","detectLoop","detector","warn","timestamp","performance","now","result","detectFrame","faceDetected","landmarks","clearInterval","cancelAnimationFrame","handleContinue","handleRetry","reset","getTracks","forEach","track","stop","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_detectionResult$skew","_detectionResult$base","_detectionResult$delt","hasAlert","skewScore","toFixed","baseline","delta","ref","autoPlay","playsInline","muted","style","display","minHeight","position","bottom","left","transform","background","padding","borderRadius","color","fontWeight","textAlign","top","fontSize","marginBottom","_c","$RefreshReg$"],"sources":["/home/hugorteixeira/AvisoVC/frontend/src/pages/TestFacial.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useApp } from '../contexts/AppContext';\nimport { FaceDetector, drawLandmarks } from '../utils/faceDetection';\n\nexport default function TestFacial() {\n  const navigate = useNavigate();\n  const { baselineFace } = useApp();\n\n  const [status, setStatus] = useState('init'); // init, ready, testing, analyzing, result, error\n  const [testDuration, setTestDuration] = useState(0);\n  const [detectionResult, setDetectionResult] = useState(null);\n  const [currentStatus, setCurrentStatus] = useState('');\n  const [error, setError] = useState(null);\n\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const faceDetectorRef = useRef(null);\n  const streamRef = useRef(null);\n  const animationFrameRef = useRef(null);\n  const timerRef = useRef(null);\n\n  useEffect(() => {\n    initializeTest();\n    return () => {\n      cleanup();\n    };\n  }, []);\n\n  const initializeTest = async () => {\n    try {\n      // Check if baseline exists\n      if (!baselineFace) {\n        setError('Voc√™ precisa criar um perfil facial primeiro');\n        setStatus('error');\n        return;\n      }\n\n      // Initialize camera\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          facingMode: 'user',\n          width: { ideal: 720 },\n          height: { ideal: 540 },\n        },\n        audio: false,\n      });\n\n      streamRef.current = stream;\n\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        await new Promise((resolve) => {\n          videoRef.current.onloadedmetadata = resolve;\n        });\n        await videoRef.current.play();\n\n        // Wait for video to have valid dimensions\n        await new Promise((resolve) => {\n          const checkDimensions = () => {\n            if (videoRef.current.videoWidth > 0 && videoRef.current.videoHeight > 0) {\n              resolve();\n            } else {\n              setTimeout(checkDimensions, 100);\n            }\n          };\n          checkDimensions();\n        });\n\n        if (canvasRef.current) {\n          canvasRef.current.width = videoRef.current.videoWidth;\n          canvasRef.current.height = videoRef.current.videoHeight;\n        }\n      }\n\n      // Initialize face detector\n      faceDetectorRef.current = new FaceDetector();\n      await faceDetectorRef.current.init();\n\n      // Load baseline\n      faceDetectorRef.current.loadBaseline(baselineFace);\n\n      setStatus('ready');\n\n      // Start preview loop to show video on canvas even before test starts\n      startPreviewLoop();\n    } catch (err) {\n      console.error('Failed to initialize test:', err);\n      setError(err.message || 'N√£o foi poss√≠vel iniciar o teste');\n      setStatus('error');\n    }\n  };\n\n  const startPreviewLoop = () => {\n    const previewFrame = () => {\n      const video = videoRef.current;\n      const canvas = canvasRef.current;\n\n      // Only draw if we're in ready state and have valid resources\n      if (!video || !canvas || status === 'init' || status === 'testing') {\n        return;\n      }\n\n      const ctx = canvas.getContext('2d');\n      if (ctx && video.videoWidth > 0 && video.videoHeight > 0) {\n        // Ensure canvas has proper dimensions\n        if (canvas.width !== video.videoWidth || canvas.height !== video.videoHeight) {\n          canvas.width = video.videoWidth;\n          canvas.height = video.videoHeight;\n        }\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n      }\n\n      // Continue preview loop\n      requestAnimationFrame(previewFrame);\n    };\n\n    previewFrame();\n  };\n\n  const handleStartTest = () => {\n    console.log('handleStartTest called');\n    console.log('faceDetectorRef:', faceDetectorRef.current);\n    console.log('videoRef:', videoRef.current);\n    console.log('video dimensions:', videoRef.current?.videoWidth, videoRef.current?.videoHeight);\n\n    if (!faceDetectorRef.current || !videoRef.current) {\n      console.error('Sistema n√£o inicializado');\n      setError('Sistema n√£o inicializado');\n      setStatus('error');\n      return;\n    }\n\n    // Validate video is ready\n    if (videoRef.current.videoWidth === 0 || videoRef.current.videoHeight === 0) {\n      console.error('V√≠deo n√£o est√° pronto');\n      setError('V√≠deo ainda n√£o est√° pronto. Aguarde um momento e tente novamente.');\n      setStatus('error');\n      return;\n    }\n\n    console.log('Starting test...');\n    setStatus('testing');\n    setTestDuration(0);\n    setCurrentStatus('Analisando...');\n\n    // Start timer (10 seconds test)\n    timerRef.current = setInterval(() => {\n      setTestDuration((prev) => {\n        const newTime = prev + 0.1;\n        if (newTime >= 10) {\n          finishTest();\n        }\n        return newTime;\n      });\n    }, 100);\n\n    // Start detection loop\n    detectLoop();\n  };\n\n  const detectLoop = () => {\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    const ctx = canvas?.getContext('2d');\n    const detector = faceDetectorRef.current;\n\n    // Stop if required resources are not available\n    if (!video || !canvas || !ctx || !detector) {\n      console.warn('Detection loop stopped: missing resources');\n      return;\n    }\n\n    try {\n      const timestamp = performance.now();\n      const result = detector.detectFrame(video, timestamp);\n\n      // Clear and draw\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n\n      if (result.faceDetected) {\n        // Draw landmarks\n        if (result.landmarks) {\n          drawLandmarks(\n            ctx,\n            result.landmarks,\n            canvas.width,\n            canvas.height,\n            result.status === 'alert'\n          );\n        }\n\n        // Update status\n        if (result.status === 'alert') {\n          setCurrentStatus('‚ö†Ô∏è ASSIMETRIA DETECTADA!');\n          setDetectionResult(result);\n        } else if (result.status === 'ok') {\n          setCurrentStatus('‚úì Normal');\n        }\n      } else if (result.status === 'no_video') {\n        // Video not ready yet, wait a bit\n        setCurrentStatus('Aguardando v√≠deo...');\n      } else {\n        setCurrentStatus('Posicione seu rosto na c√¢mera');\n      }\n\n      // Continue loop\n      animationFrameRef.current = requestAnimationFrame(detectLoop);\n    } catch (err) {\n      console.error('Detection error:', err);\n      setError(err.message);\n      setStatus('error');\n    }\n  };\n\n  const finishTest = () => {\n    // Stop timer and animation\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n    if (animationFrameRef.current) {\n      cancelAnimationFrame(animationFrameRef.current);\n      animationFrameRef.current = null;\n    }\n\n    setStatus('analyzing');\n\n    // Brief delay to show analyzing state\n    setTimeout(() => {\n      setStatus('result');\n    }, 1000);\n  };\n\n  const handleContinue = () => {\n    cleanup();\n    if (detectionResult && detectionResult.status === 'alert') {\n      // Skip to results attention\n      navigate('/results-attention');\n    } else {\n      // Continue to next test\n      navigate('/test-arm-right');\n    }\n  };\n\n  const handleRetry = () => {\n    if (faceDetectorRef.current) {\n      faceDetectorRef.current.reset();\n      if (baselineFace) {\n        faceDetectorRef.current.loadBaseline(baselineFace);\n      }\n    }\n    setStatus('ready');\n    setTestDuration(0);\n    setCurrentStatus('');\n    setDetectionResult(null);\n    setError(null);\n  };\n\n  const cleanup = () => {\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n    }\n    if (animationFrameRef.current) {\n      cancelAnimationFrame(animationFrameRef.current);\n    }\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach((track) => track.stop());\n    }\n    if (faceDetectorRef.current) {\n      faceDetectorRef.current.cleanup();\n    }\n  };\n\n  // Render states\n  if (status === 'init') {\n    return (\n      <div className=\"container\">\n        <div className=\"spinner\"></div>\n        <p>Inicializando teste facial...</p>\n      </div>\n    );\n  }\n\n  if (status === 'error') {\n    return (\n      <div className=\"container\">\n        <div className=\"icon danger\">‚ö†Ô∏è</div>\n        <h1>Erro</h1>\n        <p className=\"text-danger\">{error}</p>\n        <button className=\"button\" onClick={initializeTest}>\n          TENTAR NOVAMENTE\n        </button>\n        <button className=\"button white mt-2\" onClick={() => navigate('/dashboard')}>\n          VOLTAR AO DASHBOARD\n        </button>\n      </div>\n    );\n  }\n\n  if (status === 'result') {\n    const hasAlert = detectionResult && detectionResult.status === 'alert';\n\n    return (\n      <div className=\"container\">\n        <div className={`icon ${hasAlert ? 'danger' : 'success'}`}>\n          {hasAlert ? '‚ö†Ô∏è' : '‚úì'}\n        </div>\n        <h1>Teste Facial {hasAlert ? 'COM ALERTA' : 'OK'}</h1>\n\n        <div className={`card mt-3 ${hasAlert ? 'alert danger' : 'alert success'}`}>\n          {hasAlert ? (\n            <>\n              <h3>Assimetria Facial Detectada</h3>\n              <p className=\"mt-2\">\n                O teste detectou uma assimetria significativa em sua express√£o facial.\n                Isso pode ser um sinal de alerta.\n              </p>\n              {detectionResult && (\n                <div className=\"mt-2\">\n                  <p><strong>√çndice de assimetria:</strong> {detectionResult.skewScore?.toFixed(4)}</p>\n                  <p><strong>Baseline:</strong> {detectionResult.baseline?.toFixed(4)}</p>\n                  <p><strong>Diferen√ßa:</strong> {detectionResult.delta?.toFixed(4)}</p>\n                </div>\n              )}\n            </>\n          ) : (\n            <>\n              <h3>Teste Facial Normal</h3>\n              <p className=\"mt-2\">\n                Nenhuma assimetria significativa foi detectada em sua express√£o facial.\n              </p>\n            </>\n          )}\n        </div>\n\n        {hasAlert ? (\n          <>\n            <div className=\"card mt-2 bg-info\">\n              <p className=\"mb-0\">\n                <strong>‚ö†Ô∏è Recomenda√ß√£o:</strong> Devido ao resultado do teste,\n                recomendamos que voc√™ acione a emerg√™ncia imediatamente.\n              </p>\n            </div>\n            <button className=\"button mt-3\" onClick={() => navigate('/results-attention')}>\n              ACIONAR EMERG√äNCIA\n            </button>\n            <button className=\"button white mt-2\" onClick={handleRetry}>\n              REFAZER TESTE\n            </button>\n          </>\n        ) : (\n          <>\n            <button className=\"button green mt-3\" onClick={handleContinue}>\n              CONTINUAR PARA PR√ìXIMO TESTE (2/4)\n            </button>\n            <button className=\"button white mt-2\" onClick={handleRetry}>\n              REFAZER TESTE\n            </button>\n          </>\n        )}\n      </div>\n    );\n  }\n\n  if (status === 'analyzing') {\n    return (\n      <div className=\"container\">\n        <div className=\"spinner\"></div>\n        <h1>Analisando Resultados...</h1>\n        <p className=\"text-muted\">Processando dados do teste facial</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container\">\n      <h1>Teste FAST 1/4 - Face (Rosto)</h1>\n      <p className=\"text-muted\">Protocolo de Detec√ß√£o de AVC</p>\n\n      {status === 'ready' && (\n        <div className=\"card mt-3\">\n          <h3>Instru√ß√µes</h3>\n          <ul className=\"text-left\">\n            <li><strong>Sorria</strong> para a c√¢mera</li>\n            <li>Mantenha o sorriso por <strong>10 segundos</strong></li>\n            <li>O sistema ir√° detectar se h√° assimetria facial</li>\n            <li>Mantenha o rosto centralizado</li>\n          </ul>\n          <p className=\"text-muted mt-2\">\n            <em>Um sorriso assim√©trico pode indicar fraqueza muscular facial</em>\n          </p>\n        </div>\n      )}\n\n      <div className=\"video-container mt-3\">\n        <video\n          ref={videoRef}\n          autoPlay\n          playsInline\n          muted\n          style={{ display: status === 'ready' ? 'block' : 'none' }}\n        />\n        <canvas\n          ref={canvasRef}\n          style={{ display: status === 'testing' ? 'block' : 'none', minHeight: '360px' }}\n        />\n\n        {status === 'ready' && (\n          <div className=\"video-overlay\">\n            <div style={{\n              position: 'absolute',\n              bottom: '20px',\n              left: '50%',\n              transform: 'translateX(-50%)',\n              background: 'rgba(0,0,0,0.7)',\n              padding: '12px 24px',\n              borderRadius: '8px',\n              color: 'white',\n              fontWeight: '600',\n              textAlign: 'center',\n            }}>\n              üìπ C√¢mera ativa - Pronto para iniciar\n            </div>\n          </div>\n        )}\n\n        {status === 'testing' && (\n          <div className=\"video-overlay\">\n            <div style={{\n              position: 'absolute',\n              top: '20px',\n              left: '50%',\n              transform: 'translateX(-50%)',\n              background: 'rgba(0,0,0,0.8)',\n              padding: '16px 32px',\n              borderRadius: '12px',\n              color: 'white',\n              fontWeight: '600',\n              fontSize: '1.2rem',\n              textAlign: 'center',\n            }}>\n              <div style={{ fontSize: '2rem', marginBottom: '8px' }}>\n                {testDuration.toFixed(1)}s\n              </div>\n              <div>{currentStatus}</div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {status === 'testing' && (\n        <div className=\"card mt-3\">\n          <div className=\"progress-bar\">\n            <div\n              className=\"progress-fill\"\n              style={{\n                width: `${(testDuration / 10) * 100}%`,\n                background: detectionResult?.status === 'alert'\n                  ? 'var(--primary-red)'\n                  : 'var(--primary-green)'\n              }}\n            ></div>\n          </div>\n          <p className=\"text-center text-muted mt-2\">\n            Mantenha o sorriso por {(10 - testDuration).toFixed(1)}s\n          </p>\n        </div>\n      )}\n\n      {status === 'ready' && (\n        <>\n          <button className=\"button purple mt-3\" onClick={handleStartTest}>\n            üòä INICIAR TESTE FACIAL\n          </button>\n          <button className=\"button white mt-2\" onClick={() => navigate('/dashboard')}>\n            CANCELAR\n          </button>\n        </>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}