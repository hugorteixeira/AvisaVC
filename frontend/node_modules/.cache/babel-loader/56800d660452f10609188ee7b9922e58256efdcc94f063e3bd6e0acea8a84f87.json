{"ast":null,"code":"var _jsxFileName = \"/home/hugorteixeira/AvisoVC/frontend/src/pages/FaceRecording.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useApp } from '../contexts/AppContext';\nimport { FaceDetector, drawLandmarks } from '../utils/faceDetection';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function FaceRecording() {\n  _s();\n  const navigate = useNavigate();\n  const {\n    setBaselineFace\n  } = useApp();\n  const [status, setStatus] = useState('init'); // init, ready, calibrating, complete, error\n  const [progress, setProgress] = useState(0);\n  const [message, setMessage] = useState('Inicializando c√¢mera...');\n  const [error, setError] = useState(null);\n  const [baselineData, setBaselineData] = useState(null);\n  const [streamVersion, setStreamVersion] = useState(0);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const faceDetectorRef = useRef(null);\n  const streamRef = useRef(null);\n  const animationFrameRef = useRef(null);\n  useEffect(() => {\n    initializeCamera();\n    return () => {\n      cleanup();\n    };\n  }, []);\n  useEffect(() => {\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    const stream = streamRef.current;\n    if (!video || !stream) {\n      return;\n    }\n    let cancelled = false;\n    const prepareVideo = async () => {\n      if (video.srcObject !== stream) {\n        video.srcObject = stream;\n      }\n      if (video.readyState < HTMLMediaElement.HAVE_METADATA) {\n        await new Promise(resolve => {\n          const handler = () => {\n            video.removeEventListener('loadedmetadata', handler);\n            resolve();\n          };\n          video.addEventListener('loadedmetadata', handler, {\n            once: true\n          });\n        });\n      }\n      if (cancelled) return;\n      try {\n        await video.play();\n      } catch (playError) {\n        console.warn('N√£o foi poss√≠vel iniciar o v√≠deo automaticamente:', playError);\n      }\n      if (cancelled) return;\n      if (canvas && video.videoWidth > 0 && video.videoHeight > 0) {\n        canvas.width = video.videoWidth;\n        canvas.height = video.videoHeight;\n      }\n    };\n    prepareVideo();\n    return () => {\n      cancelled = true;\n    };\n  }, [status, streamVersion]);\n  const initializeCamera = async () => {\n    try {\n      console.log('üé¨ Initializing face recording camera...');\n\n      // Request camera access\n      console.log('üìπ Requesting camera access...');\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          facingMode: 'user',\n          width: {\n            ideal: 720\n          },\n          height: {\n            ideal: 540\n          }\n        },\n        audio: false\n      });\n      console.log('‚úÖ Camera access granted');\n      streamRef.current = stream;\n      setStreamVersion(version => version + 1);\n\n      // Set video source\n      if (videoRef.current) {\n        console.log('üé• Setting up video element...');\n        videoRef.current.srcObject = stream;\n        await new Promise(resolve => {\n          videoRef.current.onloadedmetadata = () => {\n            console.log('‚úÖ Video metadata loaded');\n            resolve();\n          };\n        });\n        await videoRef.current.play();\n        console.log('‚úÖ Video playing');\n\n        // Wait for video to have valid dimensions\n        console.log('‚è≥ Waiting for video dimensions...');\n        await new Promise((resolve, reject) => {\n          let attempts = 0;\n          const maxAttempts = 50; // 5 seconds max\n          const checkDimensions = () => {\n            attempts++;\n            if (videoRef.current && videoRef.current.videoWidth > 0 && videoRef.current.videoHeight > 0) {\n              console.log(`‚úÖ Video dimensions: ${videoRef.current.videoWidth}x${videoRef.current.videoHeight}`);\n              resolve();\n            } else if (attempts >= maxAttempts) {\n              console.error(`‚ùå Timeout waiting for video dimensions after ${attempts} attempts`);\n              reject(new Error('Timeout esperando dimens√µes do v√≠deo. Tente recarregar a p√°gina.'));\n            } else {\n              console.log(`‚è≥ Video dimensions not ready yet... (attempt ${attempts}/${maxAttempts})`);\n              setTimeout(checkDimensions, 100);\n            }\n          };\n          checkDimensions();\n        });\n\n        // Set canvas size\n        if (canvasRef.current) {\n          canvasRef.current.width = videoRef.current.videoWidth;\n          canvasRef.current.height = videoRef.current.videoHeight;\n          console.log(`‚úÖ Canvas set to ${canvasRef.current.width}x${canvasRef.current.height}`);\n        }\n      }\n\n      // Initialize face detector\n      setMessage('Carregando detector facial...');\n      console.log('ü§ñ Initializing face detector...');\n      faceDetectorRef.current = new FaceDetector();\n      await faceDetectorRef.current.init();\n      console.log('‚úÖ Face detector initialized');\n      setStatus('ready');\n      setMessage('Pronto para iniciar');\n      console.log('‚úÖ Face recording ready!');\n    } catch (err) {\n      console.error('‚ùå Failed to initialize:', err);\n      setError(err.message || 'N√£o foi poss√≠vel acessar a c√¢mera');\n      setStatus('error');\n    }\n  };\n  const handleStartCalibration = () => {\n    var _videoRef$current, _videoRef$current2;\n    console.log('üé¨ Starting calibration...');\n    console.log('faceDetectorRef:', faceDetectorRef.current);\n    console.log('videoRef:', videoRef.current);\n    console.log('video dimensions:', (_videoRef$current = videoRef.current) === null || _videoRef$current === void 0 ? void 0 : _videoRef$current.videoWidth, 'x', (_videoRef$current2 = videoRef.current) === null || _videoRef$current2 === void 0 ? void 0 : _videoRef$current2.videoHeight);\n    if (!faceDetectorRef.current || !videoRef.current) {\n      console.error('‚ùå Sistema n√£o inicializado');\n      setError('Sistema n√£o inicializado');\n      setStatus('error');\n      return;\n    }\n\n    // Validate video is ready\n    if (videoRef.current.videoWidth === 0 || videoRef.current.videoHeight === 0) {\n      console.error('‚ùå V√≠deo n√£o est√° pronto');\n      setError('V√≠deo ainda n√£o est√° pronto. Aguarde um momento e tente novamente.');\n      setStatus('error');\n      return;\n    }\n    console.log('‚úÖ Starting calibration loop');\n    setStatus('calibrating');\n    setProgress(0);\n    setMessage('Calibrando... Mantenha o rosto centralizado');\n\n    // Start detection loop\n    detectLoop();\n  };\n  const detectLoop = () => {\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    const ctx = canvas === null || canvas === void 0 ? void 0 : canvas.getContext('2d');\n    const detector = faceDetectorRef.current;\n\n    // Stop if required resources are not available\n    if (!video || !canvas || !ctx || !detector) {\n      console.warn('Detection loop stopped: missing resources');\n      return;\n    }\n    try {\n      const timestamp = performance.now();\n      const result = detector.detectFrame(video, timestamp);\n\n      // Clear canvas and draw video\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n      if (result.faceDetected) {\n        // Draw landmarks\n        if (result.landmarks) {\n          drawLandmarks(ctx, result.landmarks, canvas.width, canvas.height, result.status === 'alert');\n        }\n\n        // Update UI based on status\n        if (result.status === 'calibrating') {\n          setProgress(result.progress);\n          setMessage(`Calibrando... ${Math.round(result.progress)}%`);\n        } else if (result.status === 'ok' || result.status === 'alert') {\n          // Calibration complete\n          finishCalibration();\n          return;\n        }\n      } else if (result.status === 'no_video') {\n        // Video not ready yet, wait a bit\n        setMessage('Aguardando v√≠deo...');\n      } else {\n        setMessage('Nenhum rosto detectado - centralize seu rosto');\n      }\n\n      // Continue loop\n      animationFrameRef.current = requestAnimationFrame(detectLoop);\n    } catch (err) {\n      console.error('Detection error:', err);\n      setError(err.message);\n      setStatus('error');\n    }\n  };\n  const finishCalibration = async () => {\n    if (!faceDetectorRef.current) return;\n    try {\n      // Get baseline data\n      const data = faceDetectorRef.current.getBaselineData();\n      setBaselineData(data);\n\n      // Save to context\n      setBaselineFace(data);\n      setStatus('complete');\n      setMessage('Calibra√ß√£o completa!');\n      setProgress(100);\n\n      // Stop animation loop\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n    } catch (err) {\n      console.error('Failed to finish calibration:', err);\n      setError(err.message);\n      setStatus('error');\n    }\n  };\n  const handleContinue = () => {\n    cleanup();\n    navigate('/profile-created');\n  };\n  const handleRetry = () => {\n    if (faceDetectorRef.current) {\n      faceDetectorRef.current.reset();\n    }\n    setStatus('ready');\n    setProgress(0);\n    setMessage('Pronto para iniciar');\n    setError(null);\n    setBaselineData(null);\n  };\n  const cleanup = () => {\n    // Stop animation loop\n    if (animationFrameRef.current) {\n      cancelAnimationFrame(animationFrameRef.current);\n    }\n\n    // Stop camera stream\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => track.stop());\n      streamRef.current = null;\n    }\n    if (videoRef.current) {\n      videoRef.current.pause();\n      videoRef.current.srcObject = null;\n    }\n\n    // Cleanup face detector\n    if (faceDetectorRef.current) {\n      faceDetectorRef.current.cleanup();\n    }\n  };\n\n  // Render states\n  if (status === 'init') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 7\n    }, this);\n  }\n  if (status === 'error') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"icon danger\",\n        children: \"\\u26A0\\uFE0F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Erro\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-danger\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button\",\n        onClick: initializeCamera,\n        children: \"TENTAR NOVAMENTE\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button white mt-2\",\n        onClick: () => navigate(-1),\n        children: \"VOLTAR\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 7\n    }, this);\n  }\n  if (status === 'complete' && baselineData) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"icon success\",\n        children: \"\\u2713\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Calibra\\xE7\\xE3o Facial Completa!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card mt-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Perfil Facial Criado\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Baseline estabelecida:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 16\n            }, this), \" \", baselineData.mean.toFixed(4)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Frames analisados:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 16\n            }, this), \" \", baselineData.frames]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-muted mt-2\",\n            children: \"Seu perfil facial foi salvo com sucesso. O sistema ir\\xE1 monitorar assimetrias faciais que podem indicar sinais de AVC.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card mt-2 bg-info\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mb-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\u2139\\uFE0F Importante:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 13\n          }, this), \" Durante o monitoramento, o sistema ir\\xE1 alert\\xE1-lo se detectar qualquer assimetria significativa em sua face.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button green mt-3\",\n        onClick: handleContinue,\n        children: \"CONTINUAR\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button white mt-2\",\n        onClick: handleRetry,\n        children: \"REFAZER CALIBRA\\xC7\\xC3O\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"progress-indicator\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"step\",\n        children: \"1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"step-line\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"step active\",\n        children: \"2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Calibra\\xE7\\xE3o Facial\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-muted\",\n      children: \"Etapa 2 de 2 - Cria\\xE7\\xE3o do Perfil\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 7\n    }, this), status === 'ready' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card mt-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Instru\\xE7\\xF5es\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"text-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Posicione seu rosto centralizado na c\\xE2mera\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [\"Mantenha uma express\\xE3o \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"neutra e relaxada\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 40\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Evite movimentar muito a cabe\\xE7a\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Mantenha boa ilumina\\xE7\\xE3o no ambiente\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-muted mt-2\",\n        children: /*#__PURE__*/_jsxDEV(\"em\", {\n          children: \"O processo levar\\xE1 cerca de 3-5 segundos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"video-container mt-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        autoPlay: true,\n        playsInline: true,\n        muted: true,\n        style: {\n          display: status === 'calibrating' ? 'none' : 'block'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        style: {\n          display: status === 'calibrating' ? 'block' : 'none'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 9\n      }, this), status === 'ready' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"video-overlay\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            bottom: '20px',\n            left: '50%',\n            transform: 'translateX(-50%)',\n            background: 'rgba(0,0,0,0.7)',\n            padding: '12px 24px',\n            borderRadius: '8px',\n            color: 'white',\n            fontWeight: '600',\n            textAlign: 'center'\n          },\n          children: \"\\uD83D\\uDCF9 C\\xE2mera ativa - Pronto para iniciar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 11\n      }, this), status === 'calibrating' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"video-overlay\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            top: '20px',\n            left: '50%',\n            transform: 'translateX(-50%)',\n            background: 'rgba(0,0,0,0.7)',\n            padding: '12px 24px',\n            borderRadius: '8px',\n            color: 'white',\n            fontWeight: '600'\n          },\n          children: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 396,\n      columnNumber: 7\n    }, this), status === 'calibrating' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card mt-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"progress-bar\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-fill\",\n          style: {\n            width: `${progress}%`,\n            background: 'var(--primary-purple)'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 449,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center text-muted mt-2\",\n        children: [Math.round(progress), \"% completo\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 448,\n      columnNumber: 9\n    }, this), status === 'ready' && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button purple mt-3\",\n        onClick: handleStartCalibration,\n        children: \"\\uD83D\\uDCF9 INICIAR CALIBRA\\xC7\\xC3O\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button white mt-2\",\n        onClick: () => navigate(-1),\n        children: \"VOLTAR\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 371,\n    columnNumber: 5\n  }, this);\n}\n_s(FaceRecording, \"4wjVLi6BV8ZEmUasdL63omaq/SM=\", false, function () {\n  return [useNavigate, useApp];\n});\n_c = FaceRecording;\nvar _c;\n$RefreshReg$(_c, \"FaceRecording\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","useApp","FaceDetector","drawLandmarks","jsxDEV","_jsxDEV","Fragment","_Fragment","FaceRecording","_s","navigate","setBaselineFace","status","setStatus","progress","setProgress","message","setMessage","error","setError","baselineData","setBaselineData","streamVersion","setStreamVersion","videoRef","canvasRef","faceDetectorRef","streamRef","animationFrameRef","initializeCamera","cleanup","video","current","canvas","stream","cancelled","prepareVideo","srcObject","readyState","HTMLMediaElement","HAVE_METADATA","Promise","resolve","handler","removeEventListener","addEventListener","once","play","playError","console","warn","videoWidth","videoHeight","width","height","log","navigator","mediaDevices","getUserMedia","facingMode","ideal","audio","version","onloadedmetadata","reject","attempts","maxAttempts","checkDimensions","Error","setTimeout","init","err","handleStartCalibration","_videoRef$current","_videoRef$current2","detectLoop","ctx","getContext","detector","timestamp","performance","now","result","detectFrame","clearRect","drawImage","faceDetected","landmarks","Math","round","finishCalibration","requestAnimationFrame","data","getBaselineData","cancelAnimationFrame","handleContinue","handleRetry","reset","getTracks","forEach","track","stop","pause","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","mean","toFixed","frames","ref","autoPlay","playsInline","muted","style","display","position","bottom","left","transform","background","padding","borderRadius","color","fontWeight","textAlign","top","_c","$RefreshReg$"],"sources":["/home/hugorteixeira/AvisoVC/frontend/src/pages/FaceRecording.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useApp } from '../contexts/AppContext';\nimport { FaceDetector, drawLandmarks } from '../utils/faceDetection';\n\nexport default function FaceRecording() {\n  const navigate = useNavigate();\n  const { setBaselineFace } = useApp();\n\n  const [status, setStatus] = useState('init'); // init, ready, calibrating, complete, error\n  const [progress, setProgress] = useState(0);\n  const [message, setMessage] = useState('Inicializando c√¢mera...');\n  const [error, setError] = useState(null);\n  const [baselineData, setBaselineData] = useState(null);\n  const [streamVersion, setStreamVersion] = useState(0);\n\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const faceDetectorRef = useRef(null);\n  const streamRef = useRef(null);\n  const animationFrameRef = useRef(null);\n\n  useEffect(() => {\n    initializeCamera();\n    return () => {\n      cleanup();\n    };\n  }, []);\n\n  useEffect(() => {\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    const stream = streamRef.current;\n\n    if (!video || !stream) {\n      return;\n    }\n\n    let cancelled = false;\n\n    const prepareVideo = async () => {\n      if (video.srcObject !== stream) {\n        video.srcObject = stream;\n      }\n\n      if (video.readyState < HTMLMediaElement.HAVE_METADATA) {\n        await new Promise((resolve) => {\n          const handler = () => {\n            video.removeEventListener('loadedmetadata', handler);\n            resolve();\n          };\n          video.addEventListener('loadedmetadata', handler, { once: true });\n        });\n      }\n\n      if (cancelled) return;\n\n      try {\n        await video.play();\n      } catch (playError) {\n        console.warn('N√£o foi poss√≠vel iniciar o v√≠deo automaticamente:', playError);\n      }\n\n      if (cancelled) return;\n\n      if (canvas && video.videoWidth > 0 && video.videoHeight > 0) {\n        canvas.width = video.videoWidth;\n        canvas.height = video.videoHeight;\n      }\n    };\n\n    prepareVideo();\n\n    return () => {\n      cancelled = true;\n    };\n  }, [status, streamVersion]);\n\n  const initializeCamera = async () => {\n    try {\n      console.log('üé¨ Initializing face recording camera...');\n\n      // Request camera access\n      console.log('üìπ Requesting camera access...');\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          facingMode: 'user',\n          width: { ideal: 720 },\n          height: { ideal: 540 },\n        },\n        audio: false,\n      });\n      console.log('‚úÖ Camera access granted');\n\n      streamRef.current = stream;\n      setStreamVersion((version) => version + 1);\n\n      // Set video source\n      if (videoRef.current) {\n        console.log('üé• Setting up video element...');\n        videoRef.current.srcObject = stream;\n        await new Promise((resolve) => {\n          videoRef.current.onloadedmetadata = () => {\n            console.log('‚úÖ Video metadata loaded');\n            resolve();\n          };\n        });\n        await videoRef.current.play();\n        console.log('‚úÖ Video playing');\n\n        // Wait for video to have valid dimensions\n        console.log('‚è≥ Waiting for video dimensions...');\n        await new Promise((resolve, reject) => {\n          let attempts = 0;\n          const maxAttempts = 50; // 5 seconds max\n          const checkDimensions = () => {\n            attempts++;\n            if (videoRef.current && videoRef.current.videoWidth > 0 && videoRef.current.videoHeight > 0) {\n              console.log(`‚úÖ Video dimensions: ${videoRef.current.videoWidth}x${videoRef.current.videoHeight}`);\n              resolve();\n            } else if (attempts >= maxAttempts) {\n              console.error(`‚ùå Timeout waiting for video dimensions after ${attempts} attempts`);\n              reject(new Error('Timeout esperando dimens√µes do v√≠deo. Tente recarregar a p√°gina.'));\n            } else {\n              console.log(`‚è≥ Video dimensions not ready yet... (attempt ${attempts}/${maxAttempts})`);\n              setTimeout(checkDimensions, 100);\n            }\n          };\n          checkDimensions();\n        });\n\n        // Set canvas size\n        if (canvasRef.current) {\n          canvasRef.current.width = videoRef.current.videoWidth;\n          canvasRef.current.height = videoRef.current.videoHeight;\n          console.log(`‚úÖ Canvas set to ${canvasRef.current.width}x${canvasRef.current.height}`);\n        }\n      }\n\n      // Initialize face detector\n      setMessage('Carregando detector facial...');\n      console.log('ü§ñ Initializing face detector...');\n      faceDetectorRef.current = new FaceDetector();\n      await faceDetectorRef.current.init();\n      console.log('‚úÖ Face detector initialized');\n\n      setStatus('ready');\n      setMessage('Pronto para iniciar');\n      console.log('‚úÖ Face recording ready!');\n    } catch (err) {\n      console.error('‚ùå Failed to initialize:', err);\n      setError(err.message || 'N√£o foi poss√≠vel acessar a c√¢mera');\n      setStatus('error');\n    }\n  };\n\n  const handleStartCalibration = () => {\n    console.log('üé¨ Starting calibration...');\n    console.log('faceDetectorRef:', faceDetectorRef.current);\n    console.log('videoRef:', videoRef.current);\n    console.log('video dimensions:', videoRef.current?.videoWidth, 'x', videoRef.current?.videoHeight);\n\n    if (!faceDetectorRef.current || !videoRef.current) {\n      console.error('‚ùå Sistema n√£o inicializado');\n      setError('Sistema n√£o inicializado');\n      setStatus('error');\n      return;\n    }\n\n    // Validate video is ready\n    if (videoRef.current.videoWidth === 0 || videoRef.current.videoHeight === 0) {\n      console.error('‚ùå V√≠deo n√£o est√° pronto');\n      setError('V√≠deo ainda n√£o est√° pronto. Aguarde um momento e tente novamente.');\n      setStatus('error');\n      return;\n    }\n\n    console.log('‚úÖ Starting calibration loop');\n    setStatus('calibrating');\n    setProgress(0);\n    setMessage('Calibrando... Mantenha o rosto centralizado');\n\n    // Start detection loop\n    detectLoop();\n  };\n\n  const detectLoop = () => {\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    const ctx = canvas?.getContext('2d');\n    const detector = faceDetectorRef.current;\n\n    // Stop if required resources are not available\n    if (!video || !canvas || !ctx || !detector) {\n      console.warn('Detection loop stopped: missing resources');\n      return;\n    }\n\n    try {\n      const timestamp = performance.now();\n      const result = detector.detectFrame(video, timestamp);\n\n      // Clear canvas and draw video\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n\n      if (result.faceDetected) {\n        // Draw landmarks\n        if (result.landmarks) {\n          drawLandmarks(\n            ctx,\n            result.landmarks,\n            canvas.width,\n            canvas.height,\n            result.status === 'alert'\n          );\n        }\n\n        // Update UI based on status\n        if (result.status === 'calibrating') {\n          setProgress(result.progress);\n          setMessage(`Calibrando... ${Math.round(result.progress)}%`);\n        } else if (result.status === 'ok' || result.status === 'alert') {\n          // Calibration complete\n          finishCalibration();\n          return;\n        }\n      } else if (result.status === 'no_video') {\n        // Video not ready yet, wait a bit\n        setMessage('Aguardando v√≠deo...');\n      } else {\n        setMessage('Nenhum rosto detectado - centralize seu rosto');\n      }\n\n      // Continue loop\n      animationFrameRef.current = requestAnimationFrame(detectLoop);\n    } catch (err) {\n      console.error('Detection error:', err);\n      setError(err.message);\n      setStatus('error');\n    }\n  };\n\n  const finishCalibration = async () => {\n    if (!faceDetectorRef.current) return;\n\n    try {\n      // Get baseline data\n      const data = faceDetectorRef.current.getBaselineData();\n      setBaselineData(data);\n\n      // Save to context\n      setBaselineFace(data);\n\n      setStatus('complete');\n      setMessage('Calibra√ß√£o completa!');\n      setProgress(100);\n\n      // Stop animation loop\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n    } catch (err) {\n      console.error('Failed to finish calibration:', err);\n      setError(err.message);\n      setStatus('error');\n    }\n  };\n\n  const handleContinue = () => {\n    cleanup();\n    navigate('/profile-created');\n  };\n\n  const handleRetry = () => {\n    if (faceDetectorRef.current) {\n      faceDetectorRef.current.reset();\n    }\n    setStatus('ready');\n    setProgress(0);\n    setMessage('Pronto para iniciar');\n    setError(null);\n    setBaselineData(null);\n  };\n\n  const cleanup = () => {\n    // Stop animation loop\n    if (animationFrameRef.current) {\n      cancelAnimationFrame(animationFrameRef.current);\n    }\n\n    // Stop camera stream\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach((track) => track.stop());\n      streamRef.current = null;\n    }\n\n    if (videoRef.current) {\n      videoRef.current.pause();\n      videoRef.current.srcObject = null;\n    }\n\n    // Cleanup face detector\n    if (faceDetectorRef.current) {\n      faceDetectorRef.current.cleanup();\n    }\n  };\n\n  // Render states\n  if (status === 'init') {\n    return (\n      <div className=\"container\">\n        <div className=\"spinner\"></div>\n        <p>{message}</p>\n      </div>\n    );\n  }\n\n  if (status === 'error') {\n    return (\n      <div className=\"container\">\n        <div className=\"icon danger\">‚ö†Ô∏è</div>\n        <h1>Erro</h1>\n        <p className=\"text-danger\">{error}</p>\n        <button className=\"button\" onClick={initializeCamera}>\n          TENTAR NOVAMENTE\n        </button>\n        <button className=\"button white mt-2\" onClick={() => navigate(-1)}>\n          VOLTAR\n        </button>\n      </div>\n    );\n  }\n\n  if (status === 'complete' && baselineData) {\n    return (\n      <div className=\"container\">\n        <div className=\"icon success\">‚úì</div>\n        <h1>Calibra√ß√£o Facial Completa!</h1>\n\n        <div className=\"card mt-3\">\n          <h3>Perfil Facial Criado</h3>\n          <div className=\"mt-2\">\n            <p><strong>Baseline estabelecida:</strong> {baselineData.mean.toFixed(4)}</p>\n            <p><strong>Frames analisados:</strong> {baselineData.frames}</p>\n            <p className=\"text-muted mt-2\">\n              Seu perfil facial foi salvo com sucesso. O sistema ir√° monitorar assimetrias\n              faciais que podem indicar sinais de AVC.\n            </p>\n          </div>\n        </div>\n\n        <div className=\"card mt-2 bg-info\">\n          <p className=\"mb-0\">\n            <strong>‚ÑπÔ∏è Importante:</strong> Durante o monitoramento, o sistema ir√° alert√°-lo\n            se detectar qualquer assimetria significativa em sua face.\n          </p>\n        </div>\n\n        <button className=\"button green mt-3\" onClick={handleContinue}>\n          CONTINUAR\n        </button>\n        <button className=\"button white mt-2\" onClick={handleRetry}>\n          REFAZER CALIBRA√á√ÉO\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container\">\n      <div className=\"progress-indicator\">\n        <div className=\"step\">1</div>\n        <div className=\"step-line\"></div>\n        <div className=\"step active\">2</div>\n      </div>\n\n      <h1>Calibra√ß√£o Facial</h1>\n      <p className=\"text-muted\">Etapa 2 de 2 - Cria√ß√£o do Perfil</p>\n\n      {status === 'ready' && (\n        <div className=\"card mt-3\">\n          <h3>Instru√ß√µes</h3>\n          <ul className=\"text-left\">\n            <li>Posicione seu rosto centralizado na c√¢mera</li>\n            <li>Mantenha uma express√£o <strong>neutra e relaxada</strong></li>\n            <li>Evite movimentar muito a cabe√ßa</li>\n            <li>Mantenha boa ilumina√ß√£o no ambiente</li>\n          </ul>\n          <p className=\"text-muted mt-2\">\n            <em>O processo levar√° cerca de 3-5 segundos</em>\n          </p>\n        </div>\n      )}\n\n      <div className=\"video-container mt-3\">\n        <video\n          ref={videoRef}\n          autoPlay\n          playsInline\n          muted\n          style={{ display: status === 'calibrating' ? 'none' : 'block' }}\n        />\n        <canvas\n          ref={canvasRef}\n          style={{ display: status === 'calibrating' ? 'block' : 'none' }}\n        />\n\n        {status === 'ready' && (\n          <div className=\"video-overlay\">\n            <div style={{\n              position: 'absolute',\n              bottom: '20px',\n              left: '50%',\n              transform: 'translateX(-50%)',\n              background: 'rgba(0,0,0,0.7)',\n              padding: '12px 24px',\n              borderRadius: '8px',\n              color: 'white',\n              fontWeight: '600',\n              textAlign: 'center',\n            }}>\n              üìπ C√¢mera ativa - Pronto para iniciar\n            </div>\n          </div>\n        )}\n\n        {status === 'calibrating' && (\n          <div className=\"video-overlay\">\n            <div style={{\n              position: 'absolute',\n              top: '20px',\n              left: '50%',\n              transform: 'translateX(-50%)',\n              background: 'rgba(0,0,0,0.7)',\n              padding: '12px 24px',\n              borderRadius: '8px',\n              color: 'white',\n              fontWeight: '600',\n            }}>\n              {message}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {status === 'calibrating' && (\n        <div className=\"card mt-3\">\n          <div className=\"progress-bar\">\n            <div\n              className=\"progress-fill\"\n              style={{ width: `${progress}%`, background: 'var(--primary-purple)' }}\n            ></div>\n          </div>\n          <p className=\"text-center text-muted mt-2\">{Math.round(progress)}% completo</p>\n        </div>\n      )}\n\n      {status === 'ready' && (\n        <>\n          <button className=\"button purple mt-3\" onClick={handleStartCalibration}>\n            üìπ INICIAR CALIBRA√á√ÉO\n          </button>\n          <button className=\"button white mt-2\" onClick={() => navigate(-1)}>\n            VOLTAR\n          </button>\n        </>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}